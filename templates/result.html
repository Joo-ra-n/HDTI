{% extends 'base.html' %}

{% block title %} 해달 MBTI 결과 {% endblock %}

{% block content %}
    <div class="charger-wrap">
    </div>
    <div class="result-wrap">
        <div class="result">
            <img class="result__character" src={{ img }} alt="캐릭터">
            <p class="result__title">{{ type_ex }}</p>
            <p class="result__content">{{ type }}</p>
        </div>
        <div class="result-detail" style="display: none;">
            <p class="result-detail__title">이 사람은...</p>
            <p class="result-detail__content">
                {{ explanation }}
            </p>
        </div>
        <div class="result-option">
            <p id="resultOption1">1. 자세히보기</p>
            <p>2. 전체유형</p>
            <p>3. 다시하기</p>
            <p>4. 공유하기</p>
        </div>
    </div>
    <div id="haedalTypeTalk" class="haedal-type-talk">
        <img src="../static/img/type_desc.svg" alt="type">
    </div>
    <div class="btns">
        <img id="btn1" class="answer-btn1" src="../static/img/btn1.svg" alt="버튼">
        <a href="../types"><img id="2" class="answer-btn2" src="../static/img/btn2.svg" alt="버튼"></a>
        <a href="../hdti"><img id="3" class="answer-btn3" src="../static/img/btn3.svg" alt="버튼"></a>
        <img id="btn4" class="answer-btn4" src="../static/img/btn4.svg" alt="버튼">
        <img id="haedalCharacter" class="haedal-btn" src="../static/img/btn_haedal.svg" alt="버튼"></button>
    </div>
    <div class="share-btns" style="display: none;">
        <img id="twitterBtn" class="share-btn up-btn" src="../static/img/트위터.svg" alt="버튼">
        <img id="facebookBtn" class="share-btn right-btn" src="../static/img/페이스북.svg" alt="버튼">
        <img id="urlBtn" class="share-btn down-btn" src="../static/img/url.svg" alt="버튼">
        <img id="kakaoBtn" class="share-btn left-btn" src="../static/img/카카오톡.svg" alt="버튼">
        <img id="okBtn" class="share-btn ok-btn" src="../static/img/버튼_ok.svg" alt="버튼">
        <img id="backBtn" class="share-btn back-btn" src="../static/img/버튼_왼쪽 화살표.svg" alt="버튼">
    </div>
{% endblock %}

{% block script %}
    const btns = document.querySelector('.btns');
    const shareBtns = document.querySelector('.share-btns');
    const haedalTypeTalk = document.querySelector('#haedalTypeTalk');
    const haedalCharacter = document.querySelector('#haedalCharacter');
    const detailBtn = document.querySelector('#btn1');
    const shareBtn = document.querySelector('#btn4');
    const okBtn = document.querySelector('#okBtn');
    const backBtn = document.querySelector('#backBtn');
    const resultPage = document.querySelector('.result');
    const resultDetailPage = document.querySelector('.result-detail');
    const resultOptionPage = document.querySelector('.result-option');
    const resultOption1Btn = document.querySelector('#resultOption1');
    const resultOption4Btn = document.querySelector('#resultOption4');
    
    let isClicked = true;
    let isTypeClicked = false;

    detailBtn.addEventListener('click', function() {
        if(isClicked) {
            resultOption1Btn.innerText = '1.돌아가기';
            resultPage.style.display = 'none';
            resultDetailPage.style.display = 'block'; 
            isClicked = false;
        } else {
            resultOption1Btn.innerText = '1.자세히보기';
            resultPage.style.display = 'block';
            resultDetailPage.style.display = 'none'; 
            isClicked = true;
        }
        
    });

    okBtn.addEventListener('click', function() {
        if(isClicked) {
            resultPage.style.display = 'none';
            resultDetailPage.style.display = 'block'; 
            isClicked = false;
        } else {
            resultPage.style.display = 'block';
            resultDetailPage.style.display = 'none'; 
            isClicked = true;
        }
        
    });

    haedalCharacter.addEventListener('click', function() {
        if(isTypeClicked) {
            haedalTypeTalk.style.display = 'none';
            isTypeClicked = false;
        } else {
            haedalTypeTalk.style.display = 'block';
            isTypeClicked = true;
        }
    });

    shareBtn.addEventListener('click', function() {
        resultOptionPage.style.display = 'none';
        btns.style.display = 'none';
        shareBtns.style.display = 'block';
    });

    backBtn.addEventListener('click', function() {
        resultOptionPage.style.display = 'flex';
        btns.style.display = 'block';
        shareBtns.style.display = 'none';
    });

    // 문항 수 표시
    const chargerBox = document.querySelector('.charger-wrap');
    
    for (let i=0; i<28; i++) {
        const charger = document.createElement('span');
        charger.classList.add('charger');
        chargerBox.appendChild(charger);
    }
{% endblock %}